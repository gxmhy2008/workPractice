<div th:replace="~{common/html-header}"></div>
<body>
  <div v-cloak class="aui-page page-login">
    <div class="login-wrapper">
      <!-- page-header -->
      <div th:replace="~{common/page-header}"></div>
      <!-- page-main -->
      <main class="aui-page-main">
        <div th:replace="~{fragment/pages/register}"></div>
      </main>
      <!-- page-footer -->
      <div th:replace="~{common/page-footer}"></div>
    </div>
  </div>
  <div th:replace="~{common/html-scripts}"></div>
  <script>
    (function () {
      var vm = window.vm = new Vue({
        el: '.aui-page',
        data: function () {
          return {
            dataForm: {
              mobile: '',
              password: '',
              confirmPassword: '',
              captcha: '',
              smsCaptcha: '',
              agreement: false
            },
            dataRule: {
              mobile: [
                { required: true, message: '必填项不能为空', trigger: 'blur' }
              ],
              password: [
                { required: true, message: '必填项不能为空', trigger: 'blur' }
              ],
              confirmPassword: [
                { required: true, message: '必填项不能为空', trigger: 'blur' }
              ],
              captcha: [
                { required: true, message: '必填项不能为空', trigger: 'blur' }
              ],
              smsCaptcha: [
                { required: true, message: '必填项不能为空', trigger: 'blur' }
              ],
              agreement: [
                { validator: function (rule, value, callback) {
                  if (!value) {
                    callback(new Error('请先阅读并勾选注册协议'));
                  } else {
                    callback();
                  }
                }, trigger: 'change' }
              ]
            }
          }
        },
        beforeCreate () {
          vm = this;
        },
        methods: {
          dataFormSubmitHandle () {
            vm.$refs['dataForm'].validate(function (valid) {
              if (valid) {
                window.location.href = './login.html';
              }
            });
          }
        }
      });
    })();
  </script>
</body>
</html>
